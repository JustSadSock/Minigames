<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <title>Minigames — Arcade</title>
    <meta name="theme-color" content="#0b0b0f" />
    <!-- Все эффекты — чистый код. Ни картинок, ни библиотек. -->
    <link rel="preload" href="./styles.css" as="style" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <!-- CRT шейдеры и шум -->
    <canvas id="crt-canvas" aria-hidden="true"></canvas>
    <div id="scanlines" aria-hidden="true"></div>
    <div id="vignette" aria-hidden="true"></div>
    <div id="flicker" aria-hidden="true"></div>

    <!-- Вся UI-рамка автомата -->
    <div class="cabinet">
      <!-- Маркиза с неоном -->
      <header class="marquee">
        <div class="marquee-inner">
          <div class="logo">
            <span class="logo-shadow">MINIGAMES</span>
            <span class="logo-front">MINIGAMES</span>
          </div>
          <div class="header-right">
            <button class="coin-btn" id="insertCoinBtn" title="Вставить монету (C)">
              <span class="coin-led" id="coinLed"></span>
              INSERT COIN
            </button>
            <div class="account">
              <canvas id="avatar" width="32" height="32" class="avatar-canvas" aria-label="Аватар"></canvas>
              <div class="nick-block">
                <div class="nick" id="nickDisplay">@player</div>
                <button class="nick-edit" id="changeNickBtn" title="Изменить ник">EDIT</button>
              </div>
            </div>
            <button id="settingsBtn" class="settings-btn" title="Настройки">
              <span class="gear"></span>
            </button>
          </div>
        </div>
      </header>

      <!-- Панель статуса -->
      <div class="statusbar">
        <div class="status-left">
          <span class="led led-green" id="ledReady"></span> READY
        </div>
        <div class="status-center">
          <span id="creditsLabel">CREDITS: <b id="credits">00</b></span>
        </div>
        <div class="status-right">
          <span class="small-phosphor" id="paletteName">PICO-8</span>
        </div>
      </div>

      <!-- Меню игр: строго по два в ряд, вертикальная прокрутка -->
      <main class="menu">
        <div id="gamesGrid" class="games-grid" role="list" aria-label="Список игр">
          <!-- Карточки генерируются скриптом -->
        </div>
      </main>

      <!-- Низ автомата: кнопки управления -->
      <footer class="controlbar">
        <div class="control-left">
          <button class="px-btn" data-nav="up" title="Наверх (↑)">▲</button>
          <button class="px-btn" data-nav="down" title="Вниз (↓)">▼</button>
        </div>
        <div class="control-center">
          <button class="px-btn primary" id="startBtn" title="Старт (Enter)">START</button>
          <button class="px-btn" id="randomBtn" title="Случайная игра (R)">RND</button>
        </div>
        <div class="control-right">
          <button class="px-btn" id="muteBtn" title="Звук вкл/выкл (M)">SOUND</button>
          <button class="px-btn" id="scanBtn" title="Сканлайны вкл/выкл">SCAN</button>
        </div>
      </footer>
    </div>

    <!-- Модалка настроек -->
    <dialog id="settingsModal" class="px-modal">
      <form method="dialog" class="px-modal-inner">
        <h2>НАСТРОЙКИ</h2>
        <div class="grid2">
          <label class="toggle">
            <input type="checkbox" id="soundToggle" checked />
            <span>ЗВУК</span>
          </label>
          <label class="toggle">
            <input type="checkbox" id="bloomToggle" checked />
            <span>БЛЮМ</span>
          </label>
          <label class="toggle">
            <input type="checkbox" id="scanToggle" checked />
            <span>СКАНЛАЙНЫ</span>
          </label>
          <label class="toggle">
            <input type="checkbox" id="noiseToggle" checked />
            <span>ШУМ</span>
          </label>
          <label class="range">
            <span>ГРОМКОСТЬ</span>
            <input type="range" id="volumeRange" min="0" max="1" step="0.01" value="0.35" />
          </label>
          <label class="select">
            <span>ПАЛИТРА</span>
            <select id="paletteSelect">
              <option value="pico8" selected>PICO-8</option>
              <option value="c64">Commodore 64</option>
              <option value="gb">Game Boy</option>
              <option value="nes">NES</option>
            </select>
          </label>
        </div>
        <div class="modal-actions">
          <button class="px-btn" value="cancel">ОТМЕНА</button>
          <button class="px-btn primary" value="ok">OK</button>
        </div>
      </form>
    </dialog>

    <!-- HUD-подсказки -->
    <div class="hud" id="hud"></div>

    <script src="./script.js"></script>
  </body>
</html>
